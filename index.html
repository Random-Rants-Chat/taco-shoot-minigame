<!DOCTYPE html>
<html>
	
	<head>
		<title></title>
	</head>
	
	<body>
		<style>
			body {
				background: gray;
			}
			#Info {
				padding: 10px 10px;
				font-weight: bold;
				font-family: arial;
				background: white;
				color: black;
				position: fixed;
				top: 50%;
				left: 50%;
				transform: translate(-50%, -50%);
				font-size: 20px;
				border-radius: 5px;
			}
		</style>
		<div id="Info">Loading...</div>
		<noscript>Your browser does not support javascript, or it is disabled, please enable it.</noscript>
		<div id="Player"></div>
		<script>
			var InfoDiv = document.getElementById("Info");
			var isLoading = false;
			function loadGame () {
				if (isLoading) {return;}
				isLoading = true;
				var script = document.createElement("script");
				script.src = "https://github.com/Random-Rants-Chat/taco-shoot-minigame/releases/download/3/gm2player.js";
				script.onload = function () {
					var script = document.createElement("script");
					script.src = "project.js?n=1";
					script.onload = function () {
						Info.remove();
					};
					script.onerror = function () {
					    InfoDiv.textContent = `Unable to load, try again later.`;
				        InfoDiv.style.color = "red";
    				};
    				document.body.append(script);
    				InfoDiv.textContent = `Loading startup code...`;
				};
				script.onerror = function () {
				    InfoDiv.textContent = `Unable to load, try again later.`;
				    InfoDiv.style.color = "red";
				};
				document.body.append(script);
				InfoDiv.textContent = `Loading Gvbvdxx Mod 2 Project Player...`;
			}
			window.UserInfo = {};
			var count = 5;
			var interval = setInterval(() => {
				if (count == 0) {
					clearInterval(interval);
					loadGame();
					return;
				}
                InfoDiv.textContent = `Waiting for Random Rants + to send user info... (${count} seconds remaining)`;
                count -= 1;
			},1000);
			window.addEventListener("message", (event) => {
				var data = event.data;
				if (data.type == "RRUserInfo") { //Random Rants + will send an special message containing the users display name and username.
					window.UserInfo = {
						displayName: data.displayName,
						username: data.userName
					};
					clearInterval(interval);
					loadGame();
				}
			});
		</script>
	</body>

</html>
